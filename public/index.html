<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Exercise Tracker | FreeCodeCamp Project</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
      color: #333;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      background: white;
      border-radius: 12px;
      padding: 40px;
      box-shadow: 0 10px 50px rgba(0, 0, 0, 0.3);
    }

    h1 {
      text-align: center;
      color: #667eea;
      margin-bottom: 10px;
      font-size: 2.8rem;
      font-weight: 700;
    }

    .subtitle {
      text-align: center;
      color: #666;
      margin-bottom: 40px;
      font-size: 1.1rem;
    }

    h2 {
      color: #764ba2;
      margin-bottom: 20px;
      font-size: 1.6rem;
      border-bottom: 3px solid #667eea;
      padding-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .icon {
      font-size: 1.4rem;
    }

    .form-section, .info-section {
      margin-bottom: 35px;
      padding: 25px;
      background: #f8f9fa;
      border-radius: 10px;
      border: 1px solid #e9ecef;
    }

    form {
      display: flex;
      flex-direction: column;
      gap: 18px;
    }

    label {
      font-weight: 600;
      color: #495057;
      margin-bottom: 5px;
      font-size: 0.95rem;
    }

    input {
      padding: 14px;
      border: 2px solid #dee2e6;
      border-radius: 8px;
      font-size: 1rem;
      transition: all 0.3s;
      font-family: inherit;
    }

    input:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    input::placeholder {
      color: #adb5bd;
    }

    button {
      padding: 14px 28px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1.05rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
    }

    button:active {
      transform: translateY(0);
    }

    .info-section ul {
      list-style: none;
      padding-left: 0;
    }

    .info-section li {
      padding: 15px;
      margin-bottom: 10px;
      background: white;
      border-left: 5px solid #667eea;
      border-radius: 6px;
      transition: all 0.3s;
    }

    .info-section li:hover {
      transform: translateX(5px);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .info-section strong {
      color: #764ba2;
      font-weight: 700;
    }

    .info-section code {
      background: #f1f3f5;
      padding: 2px 8px;
      border-radius: 4px;
      font-size: 0.9rem;
      color: #495057;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
    }

    .note {
      background: #fff3cd;
      border-left: 4px solid #ffc107;
      padding: 12px 16px;
      border-radius: 6px;
      margin-top: 15px;
      color: #856404;
      font-size: 0.9rem;
    }

    .success {
      background: #d4edda;
      border-left: 4px solid #28a745;
      color: #155724;
    }

    footer {
      text-align: center;
      margin-top: 40px;
      padding-top: 20px;
      border-top: 2px solid #e9ecef;
      color: #6c757d;
    }

    footer a {
      color: #667eea;
      text-decoration: none;
      font-weight: 600;
    }

    footer a:hover {
      text-decoration: underline;
    }

    @media (max-width: 768px) {
      .container {
        padding: 25px;
      }
      
      h1 {
        font-size: 2.2rem;
      }

      h2 {
        font-size: 1.3rem;
      }

      .grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üí™ Exercise Tracker</h1>
    <p class="subtitle">Track your fitness journey with our simple API</p>
    
    <!-- Create New User -->
    <div class="form-section">
      <h2><span class="icon">üë§</span> Create a New User</h2>
      <form action="/api/users" method="post">
        <label for="username">Username:</label>
        <input 
          type="text" 
          name="username" 
          id="username" 
          placeholder="Enter username (e.g., fcc_test)" 
          required
          maxlength="50"
        >
        <button type="submit">Create User</button>
      </form>
      <div class="note success">
        After creating a user, copy the <code>_id</code> from the response to use in other forms.
      </div>
    </div>

    <!-- Add Exercise -->
    <div class="form-section">
      <h2><span class="icon">üèÉ</span> Add Exercise</h2>
      <form id="exercise-form" method="post">
        <label for="userId">User ID:</label>
        <input 
          type="text" 
          name="userId" 
          id="userId" 
          placeholder="Paste user _id here (e.g., 5fb5853f734231456ccb3b05)" 
          required
        >
        
        <label for="description">Description:</label>
        <input 
          type="text" 
          name="description" 
          id="description" 
          placeholder="e.g., Running, Swimming, Cycling" 
          required
          maxlength="100"
        >
        
        <label for="duration">Duration (minutes):</label>
        <input 
          type="number" 
          name="duration" 
          id="duration" 
          placeholder="e.g., 30" 
          required
          min="1"
          max="1440"
        >
        
        <label for="date">Date (optional):</label>
        <input 
          type="date" 
          name="date" 
          id="date"
        >
        
        <button type="submit">Add Exercise</button>
      </form>
      <div class="note">
        üí° If you don't specify a date, today's date will be used automatically.
      </div>
    </div>

    <!-- Get User Logs -->
    <div class="form-section">
      <h2><span class="icon">üìä</span> Get Exercise Logs</h2>
      <form id="log-form">
        <label for="logUserId">User ID:</label>
        <input 
          type="text" 
          name="logUserId" 
          id="logUserId" 
          placeholder="Paste user _id here" 
          required
        >
        
        <div class="grid">
          <div>
            <label for="from">From (optional):</label>
            <input 
              type="date" 
              name="from" 
              id="from"
            >
          </div>
          
          <div>
            <label for="to">To (optional):</label>
            <input 
              type="date" 
              name="to" 
              id="to"
            >
          </div>
        </div>
        
        <label for="limit">Limit (optional):</label>
        <input 
          type="number" 
          name="limit" 
          id="limit" 
          placeholder="e.g., 10 (max number of exercises to return)"
          min="1"
        >
        
        <button type="submit">Get Logs</button>
      </form>
      <div class="note">
        üîç Use filters to view exercises within a specific date range or limit results.
      </div>
    </div>

    <!-- API Endpoints -->
    <div class="info-section">
      <h2><span class="icon">üîå</span> API Endpoints</h2>
      <ul>
        <li>
          <strong>POST /api/users</strong><br>
          Create a new user<br>
          <code>Body: { username: "string" }</code>
        </li>
        <li>
          <strong>GET /api/users</strong><br>
          Get all users<br>
          <code>Returns: Array of users</code>
        </li>
        <li>
          <strong>POST /api/users/:_id/exercises</strong><br>
          Add exercise for a user<br>
          <code>Body: { description: "string", duration: number, date: "yyyy-mm-dd" }</code>
        </li>
        <li>
          <strong>GET /api/users/:_id/logs?[from][&to][&limit]</strong><br>
          Get user's exercise log with optional filters<br>
          <code>Query: from, to (yyyy-mm-dd), limit (number)</code>
        </li>
      </ul>
    </div>

    <footer>
      <p>Built for <a href="https://www.freecodecamp.org/" target="_blank">FreeCodeCamp</a> Back End Development Certification</p>
      <p style="margin-top: 10px;">Made with ‚ù§Ô∏è using Node.js, Express, and MongoDB</p>
    </footer>
  </div>

  <script>
    // Handle exercise form submission
    document.getElementById('exercise-form').addEventListener('submit', function(e) {
      e.preventDefault();
      const userId = document.getElementById('userId').value.trim();
      
      if (!userId) {
        alert('Please enter a User ID');
        return;
      }
      
      const form = e.target;
      form.action = `/api/users/${userId}/exercises`;
      form.submit();
    });

    // Handle log form submission
    document.getElementById('log-form').addEventListener('submit', function(e) {
      e.preventDefault();
      const userId = document.getElementById('logUserId').value.trim();
      
      if (!userId) {
        alert('Please enter a User ID');
        return;
      }
      
      const from = document.getElementById('from').value;
      const to = document.getElementById('to').value;
      const limit = document.getElementById('limit').value;
      
      let url = `/api/users/${userId}/logs?`;
      const params = [];
      
      if (from) params.push(`from=${from}`);
      if (to) params.push(`to=${to}`);
      if (limit) params.push(`limit=${limit}`);
      
      url += params.join('&');
      
      window.location.href = url;
    });

    // Auto-fill today's date as max for date inputs
    const today = new Date().toISOString().split('T')[0];
    document.getElementById('date').setAttribute('max', today);
    document.getElementById('from').setAttribute('max', today);
    document.getElementById('to').setAttribute('max', today);
  </script>
</body>
</html>